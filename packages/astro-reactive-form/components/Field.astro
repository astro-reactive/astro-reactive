---
import type { FormControl } from '../core/form-control';

export interface Props {
	control: FormControl;
}

const { control } = Astro.props;

---

<div>
	{
		control.label && control.labelPosition === 'left' && (
			<label for={control.name}>{control.label}</label>
		)
	}

	<input
		name={control.name}
		id={control.name}
		type={control.type}
		value={control.value}
		checked={control.value === 'checked'}
		data-is-pristine={String(control.isPristine)}
		data-is-valid={String(control.isValid)}
	/>

	{
		control.label && control.labelPosition === 'right' && (
			<label for={control.name}>{control.label}</label>
		) 
	}
</div>

<script>
import { FormGroup } from "../core";

let formGroups;
const inputFields = document.querySelectorAll("input");

inputFields.forEach(field => {
	formGroups = new FormGroup([
		{
			name : field.name, 
			value : field.value,
		}
	])
	console.log(formGroups)
	field.addEventListener("input", () => {
		field.dataset.isPristine = "false"		
})
})

</script>
