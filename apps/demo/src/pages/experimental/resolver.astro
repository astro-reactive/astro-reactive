---
import type { Submit } from "@astro-reactive/common";
import Form, { FormControl, FormGroup } from "@astro-reactive/form";
import { z } from "zod";
import { zodResolver } from "@astro-reactive/resolvers";
import Layout from "../../components/Layout.astro";
import { withZod } from "@astro-reactive/resolvers";

console.log({ name: z.string() });

const zodFormGroup = FormGroup.from(
  zodResolver({
    id: z.string().min(3).max(20),
    name: z.string().optional(),
    age: z.number(),
    email: z.string().email().optional(),
  })
);

zodFormGroup.controls.push(new FormControl({ name : "lastName", label : "Last Name", validators : withZod(z.string().min(5).optional())}))

const submit: Submit = {
  name: "submit",
  type: "submit",
  value: "Let's go!",
};
---

<Layout title="Schema Builder Resolver">
  <Form
    validateOnLoad
    showValidationHints
    formGroups={zodFormGroup}
    submitControl={submit}
  />
  <pre>{JSON.stringify(zodFormGroup, null, 2)}</pre>
</Layout>

<script></script>
